(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{248:function(e,t,a){e.exports=a.p+"static/media/database.0279fb2a.png"},278:function(e,t,a){e.exports=a(542)},283:function(e,t,a){},284:function(e,t,a){},542:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(38),i=a.n(s),r=(a(283),a(28)),c=a(29),o=a(31),d=a(30),u=a(32),h=a(248),p=a.n(h),m=(a(284),a(19)),y=a(6),w=function(e){var t=e.article,a=e.link,n=e.date,s=e.title,i=e.keywordList,r=i?l.a.createElement("div",{className:"keyword-list"},"[ ",i.join(", ")," ]"):l.a.createElement("div",null);return l.a.createElement("div",{className:"news-item-wrapper"},l.a.createElement("div",{className:"news-item-date"},n),l.a.createElement("div",{className:"news-item-info"},l.a.createElement("div",{style:{textAlign:"left"}},s," ",l.a.createElement("br",null)," ",r),l.a.createElement("br",null),l.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"}," link ")),l.a.createElement("div",{className:"news-item-article"},t?t.length>500?t.substr(0,499)+"...":t:""))},f=a(249),k=a.n(f),S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={},a.state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.newsIsLoading,a=e.newsList,n=e.source,s=e.sourceLink,i=(e.keywordValue,e.keywordSearchMode,!t&&a?l.a.createElement("div",{className:"news-items-wrapper"},a.map((function(e,t){return l.a.createElement(w,{key:"newsitem_"+n+"_"+t,article:e.article,link:e.link,date:e.date,title:e.title,keywordList:e.keywordList})}))):l.a.createElement("div",{className:"loading"},l.a.createElement(k.a,{size:15,margin:2,color:"#36D7B7",loading:this.state.loading})));return l.a.createElement("div",{className:"news-mother-cell"},l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"source"},l.a.createElement("a",{href:s,target:"_blank"},l.a.createElement("h3",null,n))),i))}}]),t}(n.Component),g=a(63),b=(a(172),a(554)),E=a(555),v=a(556),C=a(548),A=function(e){var t=e.handleSourceCheckAll,a=e.handleSourceChange,n=e.sourceCheckAll,s=e.sourceValue,i=e.sourceIndeterminate,r=e.allSource;return l.a.createElement(b.a,{className:"field source"},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Source:")),l.a.createElement(E.a,{xs:21,className:"input"},l.a.createElement(v.a,{checked:n,onChange:t,indeterminate:i,id:"checkbox_source_ALL",label:"ALL",value:"ALL"},"ALL"),l.a.createElement(C.a,{inline:!0,name:"checkboxList",value:s,onChange:a},r.map((function(e,t){return l.a.createElement(v.a,{key:"source_"+t,value:e},e)})))))},I=a(553),O=function(e){var t=e.handleDateChange,a=e.dateSpecified,n=e.dateValue;return l.a.createElement(b.a,{className:"field date",style:{marginTop:"20px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Date:")),l.a.createElement(E.a,{xs:21,className:"input"},a&&n.length?l.a.createElement(I.a,{value:n,appearance:"default",placeholder:"to specify a period ...",style:{width:280},onChange:t}):l.a.createElement(I.a,{appearance:"default",placeholder:"to specify a period ...",style:{width:280},onChange:t})))},V=a(550),K=a(551),x=a(557),N=a(552),L=a(558),j=a(559),M={radioGroupLabel:{padding:"8px 2px 8px 10px",display:"inline-block",verticalAlign:"middle"},inputForExtraKeyword:{width:300,marginBottom:10}},D=function(e){var t=e.handleKeywordCheckAll,a=e.handleKeywordChange,n=e.handleKeywordSearchModeChange,s=e.handleAddKeyword,i=e.keywordCheckAll,r=e.keywordValue,c=e.keywordIndeterminate,o=e.keywordSearchMode,d=e.allKeyword,u=l.a.createElement("div",null,d.map((function(e,t){return l.a.createElement(v.a,{key:"keyword_"+t,value:e},e)}))),h="";return l.a.createElement(b.a,{className:"field keyword"},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Keyword:")),l.a.createElement(E.a,{xs:21,className:"input"},l.a.createElement(V.a,{controlId:"add_input_form"},l.a.createElement(K.a,{name:"subscriptionRadioList",inline:!0,defaultValue:e.keywordIsSpecified,onChange:function(t){e.handleKeywordIsSpecifiedChange(t)}},l.a.createElement(x.a,{value:!0},"Specified"),l.a.createElement(x.a,{value:!1},"Not specified")),e.keywordIsSpecified?l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(K.a,{name:"keywordSearchMode",inline:!0,appearance:"picker",value:o,onChange:function(e){n("keywordSearchMode",e)}},l.a.createElement(x.a,{value:"OR"},"OR"),l.a.createElement(x.a,{value:"AND"},"AND")),l.a.createElement(v.a,{checked:i,onChange:t,indeterminate:c,id:"checkbox_keyword_ALL",label:"ALL",value:"ALL"},"ALL")),l.a.createElement("div",{className:"keyword-checkbox-group"},l.a.createElement(C.a,{inline:!0,name:"checkboxList",value:r,onChange:a},l.a.createElement("div",null),u)),l.a.createElement(N.a,{style:M.inputForExtraKeyword},l.a.createElement(L.a,{placeholder:"to add a keyword ...",onChange:function(e,t){h=e}}),l.a.createElement(N.a.Button,{onClick:function(){s(h),h=""}},l.a.createElement(j.a,{icon:"plus-square"})))):null)))},_=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={},a.state={sourceCheckAll:!1,sourceIndeterminate:!0,sourceValue:e.sourceValue,sourceAllOptions:e.sourceAllOptions,dateSpecified:e.dateSpecified,dateValue:e.dateValue,keywordIsSpecified:e.keywordIsSpecified,keywordCheckAll:!1,keywordIndeterminate:!0,keywordValue:e.keywordValue,keywordSearchMode:"OR",keywordAllOptions:e.keywordAllOptions},a.handleSourceCheckAll=a.handleSourceCheckAll.bind(Object(y.a)(a)),a.handleSourceChange=a.handleSourceChange.bind(Object(y.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(y.a)(a)),a.handleKeywordCheckAll=a.handleKeywordCheckAll.bind(Object(y.a)(a)),a.handleKeywordChange=a.handleKeywordChange.bind(Object(y.a)(a)),a.handleKeywordSearchModeChange=a.handleKeywordSearchModeChange.bind(Object(y.a)(a)),a.handleAddKeyword=a.handleAddKeyword.bind(Object(y.a)(a)),a.handleKeywordIsSpecifiedChange=a.handleKeywordIsSpecifiedChange.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleSourceCheckAll",value:function(e,t){var a=t?this.state.sourceAllOptions:[];this.setState({sourceValue:a,sourceIndeterminate:!1,sourceCheckAll:t}),this.props.updateSourceValue(a)}},{key:"handleSourceChange",value:function(e){this.setState({sourceValue:e,sourceIndeterminate:e.length>0&&e.length<this.state.sourceAllOptions.length,sourceCheckAll:e.length==this.state.sourceAllOptions.length}),this.props.updateSourceValue(e)}},{key:"handleDateChange",value:function(e){0!=e.length?(this.setState({dateSpecified:!0,dateValue:e}),this.props.updateDateValue(e,!0)):(this.setState({dateSpecified:!1,dateValue:""}),this.props.updateDateValue(e,!1))}},{key:"handleKeywordCheckAll",value:function(e,t){var a=t?this.state.keywordAllOptions:[];this.setState({keywordValue:a,keywordIndeterminate:!1,keywordCheckAll:t}),this.props.updateKeywordValue(a)}},{key:"handleKeywordChange",value:function(e){this.setState({keywordValue:e,keywordIndeterminate:e.length>0&&e.length<this.state.keywordAllOptions.length,keywordCheckAll:e.length==this.state.keywordAllOptions.length}),this.props.updateKeywordValue(e)}},{key:"handleKeywordSearchModeChange",value:function(e,t){this.setState(Object(g.a)({},e,t)),this.props.updateKeywordMode(t)}},{key:"handleAddKeyword",value:function(e){""==!e&&(e=e.toLowerCase(),this.state.keywordAllOptions.includes(e)||this.setState((function(t){return{keywordAllOptions:t.keywordAllOptions.concat(e)}})))}},{key:"handleKeywordIsSpecifiedChange",value:function(e){this.setState({keywordIsSpecified:e}),this.props.updateKeywordIsSpecified(e)}},{key:"render",value:function(){return Object(m.a)(this.props),Object(m.a)(this.state),l.a.createElement("div",{className:"search-engine"},l.a.createElement("div",{className:"wrapper"},l.a.createElement(O,{handleDateChange:this.handleDateChange,dateSpecified:this.state.dateSpecified,dateValue:this.state.dateValue}),l.a.createElement(A,{handleSourceCheckAll:this.handleSourceCheckAll,handleSourceChange:this.handleSourceChange,sourceCheckAll:this.state.sourceCheckAll,sourceIndeterminate:this.state.sourceIndeterminate,sourceValue:this.state.sourceValue,allSource:this.state.sourceAllOptions}),l.a.createElement(D,{handleKeywordCheckAll:this.handleKeywordCheckAll,handleKeywordChange:this.handleKeywordChange,handleKeywordSearchModeChange:this.handleKeywordSearchModeChange,handleAddKeyword:this.handleAddKeyword,keywordCheckAll:this.state.keywordCheckAll,keywordIndeterminate:this.state.keywordIndeterminate,keywordValue:this.state.keywordValue,keywordSearchMode:this.state.keywordSearchMode,allKeyword:this.state.keywordAllOptions,keywordIsSpecified:this.state.keywordIsSpecified,handleKeywordIsSpecifiedChange:this.handleKeywordIsSpecifiedChange})))}}]),t}(n.Component),R=function(e){return l.a.createElement("div",null,l.a.createElement(_,{updateSourceValue:e.updateSourceValue,updateDateValue:e.updateDateValue,updateKeywordValue:e.updateKeywordValue,updateKeywordMode:e.updateKeywordMode,updateKeywordIsSpecified:e.updateKeywordIsSpecified,sourceValue:e.sourceValue,sourceAllOptions:e.sourceAllOptions,keywordIsSpecified:e.keywordIsSpecified,keywordValue:e.keywordValue,keywordAllOptions:e.keywordAllOptions,dateValue:e.dateValue,dateSpecified:e.dateSpecified}),e.sourceValue.map((function(t,a){return l.a.createElement(S,{key:"newsGroupWrapper_"+a,newsIsLoading:e.newsIsLoading,source:t,sourceLink:e.sourceLink[t],keywordValue:e.keywordValue,keywordSearchMode:e.keywordSearchMode,newsList:e.newsList[t]})})))},z=a(272),B=function(e){var t=e.handleSourceCheckAll,a=e.handleSourceChange,n=e.sourceCheckAll,s=e.sourceValue,i=e.sourceIndeterminate,r=e.allSource;return l.a.createElement(b.a,{className:"field source"},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Source:")),l.a.createElement(E.a,{xs:21,className:"input"},l.a.createElement(V.a,null,l.a.createElement(K.a,{name:"subscriptionRadioList",inline:!0,defaultValue:e.sourceIsSpecified,onChange:function(t){e.handleSourceIsSpecifiedChange(t)}},l.a.createElement(x.a,{value:!0},"Specified"),l.a.createElement(x.a,{value:!1},"Not specified")),e.sourceIsSpecified?l.a.createElement("div",null,l.a.createElement(v.a,{checked:n,onChange:t,indeterminate:i,id:"checkbox_source_ALL",label:"ALL",value:"ALL"},"ALL"),l.a.createElement(C.a,{inline:!0,name:"checkboxList",value:s,onChange:a},r.map((function(e,t){return l.a.createElement(v.a,{key:"source_"+t,value:e},e)})))):null)))},T=a(560),F=a(276),U=a(46),W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={},a.state={subscriptionOption:"Subscribe",emailInput:"",emailConfirmed:!1,sourceCheckAll:!1,sourceIndeterminate:!0,sourceValue:e.sourceValue,sourceAllOptions:e.sourceAllOptions,sourceIsSpecified:e.sourceIsSpecified,keywordIsSpecified:e.keywordIsSpecified,keywordCheckAll:!1,keywordIndeterminate:!0,keywordValue:e.keywordValue,keywordSearchMode:"OR",keywordAllOptions:e.keywordAllOptions,errMsg:"",subscriptionStatus:!1},a.handleSourceCheckAll=a.handleSourceCheckAll.bind(Object(y.a)(a)),a.handleSourceChange=a.handleSourceChange.bind(Object(y.a)(a)),a.handleKeywordCheckAll=a.handleKeywordCheckAll.bind(Object(y.a)(a)),a.handleKeywordChange=a.handleKeywordChange.bind(Object(y.a)(a)),a.handleKeywordSearchModeChange=a.handleKeywordSearchModeChange.bind(Object(y.a)(a)),a.handleAddKeyword=a.handleAddKeyword.bind(Object(y.a)(a)),a.handleFormSubmit=a.handleFormSubmit.bind(Object(y.a)(a)),a.handleNext=a.handleNext.bind(Object(y.a)(a)),a.handleEditEmail=a.handleEditEmail.bind(Object(y.a)(a)),a.handleKeywordIsSpecifiedChange=a.handleKeywordIsSpecifiedChange.bind(Object(y.a)(a)),a.handleSourceIsSpecifiedChange=a.handleSourceIsSpecifiedChange.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleSourceCheckAll",value:function(e,t){var a=t?this.state.sourceAllOptions:[];this.setState({sourceValue:a,sourceIndeterminate:!1,sourceCheckAll:t})}},{key:"handleSourceChange",value:function(e){this.setState({sourceValue:e,sourceIndeterminate:e.length>0&&e.length<this.state.sourceAllOptions.length,sourceCheckAll:e.length==this.state.sourceAllOptions.length})}},{key:"handleKeywordCheckAll",value:function(e,t){var a=t?this.state.keywordAllOptions:[];this.setState({keywordValue:a,keywordIndeterminate:!1,keywordCheckAll:t})}},{key:"handleKeywordChange",value:function(e){this.setState({keywordValue:e,keywordIndeterminate:e.length>0&&e.length<this.state.keywordAllOptions.length,keywordCheckAll:e.length==this.state.keywordAllOptions.length})}},{key:"handleKeywordSearchModeChange",value:function(e,t){this.setState(Object(g.a)({},e,t))}},{key:"handleAddKeyword",value:function(e){""==!e&&(e=e.toLowerCase(),this.state.keywordAllOptions.includes(e)||this.setState((function(t){return{keywordAllOptions:t.keywordAllOptions.concat(e)}})))}},{key:"handleSubscriptionRadioChange",value:function(e){this.setState({subscriptionOption:e})}},{key:"handleFormSubmit",value:function(){var e=this;if(""!=this.state.emailInput){if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.emailInput).toLowerCase()))this.props.db.collection("subscriptions").doc(this.state.emailInput).set({email:this.state.emailInput,option:this.state.subscriptionOption,keywordSearchMode:this.state.keywordSearchMode,keywordList:this.state.keywordValue,keywordIsSpecified:this.state.keywordIsSpecified,sourceIsSpecified:this.state.sourceIsSpecified,sourceList:this.state.sourceValue}).then((function(){e.props.history.push("/subscribe/succeed",{email:e.state.emailInput,option:e.state.subscriptionOption,keywordSearchMode:e.state.keywordSearchMode,keywordList:e.state.keywordValue,keywordIsSpecified:e.state.keywordIsSpecified,sourceIsSpecified:e.state.sourceIsSpecified,sourceList:e.state.sourceValue})}));else this.props.history.push("/subscribe/fail",{email:this.state.emailInput})}else this.props.history.push("/subscribe/fail",{email:this.state.emailInput})}},{key:"handleNext",value:function(){var e=this;if(""!=this.state.emailInput){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.emailInput).toLowerCase()),a=!1;t?this.props.db.collection("subscriptions").doc(this.state.emailInput).get().then((function(e){e.exists&&"Subscribe"==e.data().option&&(console.log("already subscribed"),a=!0)})).catch((function(e){console.log("Error getting document:",e)})).then((function(){e.setState({errMsg:"",subscriptionStatus:a,emailConfirmed:!0})})):this.setState({errMsg:"Please provide a correct email address."})}else this.setState({errMsg:"Please provide your email address."})}},{key:"handleEditEmail",value:function(){this.setState({emailConfirmed:!1,emailInput:""})}},{key:"handleKeywordIsSpecifiedChange",value:function(e){this.setState({keywordIsSpecified:e})}},{key:"handleSourceIsSpecifiedChange",value:function(e){this.setState({sourceIsSpecified:e})}},{key:"render",value:function(){var e=this;Object(m.a)(this.props),Object(m.a)(this.state);return l.a.createElement("div",{className:"search-engine"},l.a.createElement("div",{className:"wrapper"},""!=this.state.errMsg?l.a.createElement("h4",{style:{textAlign:"left",marginLeft:"50px",color:"red"}},this.state.errMsg):null,l.a.createElement(T.a,null,l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Email:")),l.a.createElement(E.a,{xs:21,className:"input"},this.state.emailConfirmed?null:l.a.createElement(N.a,{style:Object(z.a)({display:"inline-flex"},{width:300,marginBottom:10})},l.a.createElement(L.a,{placeholder:"email address",onChange:function(t,a){e.setState({emailInput:t})}})),this.state.emailConfirmed?l.a.createElement("span",{style:{fontWeight:"600",fontSize:"16px",textDecoration:"underline"}},this.state.emailInput):null,this.state.emailConfirmed?null:l.a.createElement(F.a,{appearance:"primary",onClick:this.handleNext},"Next"),this.state.emailConfirmed?l.a.createElement(F.a,{appearance:"primary",onClick:this.handleEditEmail},"edit"):null)),this.state.emailConfirmed?l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Status:")),l.a.createElement(E.a,{xs:21,className:"input",style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{style:{fontWeight:"600",fontSize:"16px"}},this.state.subscriptionStatus?"Subscribed":"Have not subscribed"))):null,this.state.emailConfirmed?l.a.createElement(b.a,{className:"field"},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Action:")),l.a.createElement(E.a,{xs:21,className:"input"},l.a.createElement(V.a,{controlId:"subscriptionRadioList"},l.a.createElement(K.a,{name:"subscriptionRadioList",inline:!0,defaultValue:this.state.subscriptionOption,onChange:function(t){e.handleSubscriptionRadioChange(t)}},l.a.createElement(x.a,{value:"Subscribe"},"Subscribe"),l.a.createElement(x.a,{value:"Unsubscribe"},"Unsubscribe"))))):null,this.state.emailConfirmed&&"Subscribe"==this.state.subscriptionOption?l.a.createElement(B,{handleSourceCheckAll:this.handleSourceCheckAll,handleSourceChange:this.handleSourceChange,sourceCheckAll:this.state.sourceCheckAll,sourceIndeterminate:this.state.sourceIndeterminate,sourceValue:this.state.sourceValue,allSource:this.state.sourceAllOptions,sourceIsSpecified:this.state.sourceIsSpecified,handleSourceIsSpecifiedChange:this.handleSourceIsSpecifiedChange}):null,this.state.emailConfirmed&&"Subscribe"==this.state.subscriptionOption?l.a.createElement(D,{handleKeywordCheckAll:this.handleKeywordCheckAll,handleKeywordChange:this.handleKeywordChange,handleKeywordSearchModeChange:this.handleKeywordSearchModeChange,handleAddKeyword:this.handleAddKeyword,keywordCheckAll:this.state.keywordCheckAll,keywordIndeterminate:this.state.keywordIndeterminate,keywordValue:this.state.keywordValue,keywordSearchMode:this.state.keywordSearchMode,allKeyword:this.state.keywordAllOptions,keywordIsSpecified:this.state.keywordIsSpecified,handleKeywordIsSpecifiedChange:this.handleKeywordIsSpecifiedChange}):null,this.state.emailConfirmed?l.a.createElement(b.a,{className:"field"},l.a.createElement(E.a,{xs:3}),l.a.createElement(E.a,{xs:21,className:"input"},l.a.createElement(F.a,{appearance:"primary",onClick:this.handleFormSubmit},"Update"))):null)))}}]),t}(n.Component),q=Object(U.f)(W),Q=Object(U.f)((function(e){return l.a.createElement("div",null,l.a.createElement(T.a,null,l.a.createElement("div",{style:{textAlign:"left",marginLeft:"60px"}},l.a.createElement(j.a,{icon:"check-circle",style:{color:"green",marginRight:"10px"}}),"Subscription details listed below"),l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Email:")),l.a.createElement(E.a,{xs:21,className:"input",style:{display:"flex",alignItems:"center"}},l.a.createElement("span",{style:{fontWeight:"600",fontSize:"16px"}},e.location.state.email))),l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Status:")),l.a.createElement(E.a,{xs:21,className:"input",style:{display:"flex",alignItems:"center"}},l.a.createElement("span",{style:{fontWeight:"600",fontSize:"16px"}},e.location.state.option))),"Subscribe"==e.location.state.option?l.a.createElement("div",null,l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Source:")),l.a.createElement(E.a,{xs:21,className:"input",style:{display:"flex",alignItems:"center"}},l.a.createElement("span",{style:{fontWeight:"600",fontSize:"16px",textAlign:"left"}},e.location.state.sourceIsSpecified?e.location.state.sourceList.join(", "):"Not Specified"))),l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Keyword:")),l.a.createElement(E.a,{xs:21,className:"input",style:{display:"flex",alignItems:"center"}},l.a.createElement("span",{style:{fontWeight:"600",fontSize:"16px",textAlign:"left"}},e.location.state.keywordIsSpecified?e.location.state.keywordList.join(", "):"Not Specified"))),e.location.state.keywordIsSpecified?l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:3,className:"name"},l.a.createElement("span",null,"Search Mode:")),l.a.createElement(E.a,{xs:21,className:"input",style:{display:"flex",alignItems:"center"}},l.a.createElement("span",{style:{fontWeight:"600",fontSize:"16px"}},e.location.state.keywordSearchMode))):null,l.a.createElement(b.a,{className:"field",style:{marginTop:"15px"}},l.a.createElement(E.a,{xs:1,className:"name"}),l.a.createElement(E.a,{xs:23,className:"input",style:{display:"flex",alignItems:"center"}},l.a.createElement("div",null,l.a.createElement("h5",{style:{textAlign:"left"}},"- Contents of this web app will be updated everyday at 08:00 HKT"),l.a.createElement("h5",{style:{textAlign:"left"}},"- You will receive an email listing out news that match your subscription options at 09:15 HKT ( if there are any )"))))):null,l.a.createElement("div",{style:{marginTop:"20px"}},l.a.createElement("button",{style:{borderRadius:"5%",background:"grey",color:"white"},onClick:function(){e.history.push("/")}},"Back to home"))))})),Z=Object(U.f)((function(e){return l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"centre"}},l.a.createElement(j.a,{icon:"close-circle",style:{color:"red",marginRight:"10px"}}),"You did not provide or provided a wrong email address:"),l.a.createElement("h4",null,e.location.state.email),l.a.createElement("div",{style:{marginTop:"20px"}},l.a.createElement("button",{style:{borderRadius:"5%",background:"grey",color:"white"},onClick:function(){e.history.goBack()}},"Go Back")))})),G=function(e){return Object(m.a)(e),l.a.createElement("div",null,l.a.createElement(U.c,null,l.a.createElement(U.a,{path:"/subscribe/fail"},l.a.createElement(Z,null)),l.a.createElement(U.a,{path:"/subscribe/succeed"},l.a.createElement(Q,null)),l.a.createElement(U.a,{path:"/subscribe"},l.a.createElement(q,{sourceAllOptions:e.sourceAllOptions,keywordAllOptions:e.keywordAllOptions,keywordIsSpecified:e.keywordIsSpecified,sourceIsSpecified:!0,sourceValue:e.sourceValue,keywordValue:e.keywordValue,db:e.db}))))},H=function(e){return Object(m.a)(e),l.a.createElement("div",null,"admin")},J=(a(536),a(537));a(538),J.initializeApp({apiKey:"AIzaSyAXi_X5zUczfBRS4N2Jgh1fuiF29b9_r2U",authDomain:"fintech-scraping.firebaseapp.com",databaseURL:"https://fintech-scraping.firebaseio.com",projectId:"fintech-scraping"});var P=J.firestore(),$=P.collection("news"),X=["BIS","FCA","MAS"].sort(),Y={BIS:"https://www.bis.org/list/press_releases/",FCA:"https://www.fca.org.uk/news/search-results",MAS:"https://www.mas.gov.sg/news"},ee=["api","ai","fintech","fin tech","big data","data","data connectivity","data centre","data center","5g","cbdc","technology","artificial intelligence","digital","blockchain","block chain","colocation","co location","regtech","suptech","reg tech","sup tech","open api","open-api","open banking"].sort();ee=ee.map((function(e){return e.toLowerCase()}));var te=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={},a.state={sourceAllOptions:X,keywordAllOptions:ee,newsList:{},newsIsLoading:!0,sourceValue:["BIS","FCA","MAS"],sourceLink:Y,dateSpecified:!0,dateValue:[new Date((new Date).setDate((new Date).getDate()-14)),new Date],keywordIsSpecified:!0,keywordValue:["big data","data connectivity","data centre","data center","5g","cbdc","technology","digital","regtech","suptech","reg tech","sup tech","open api","open-api","open banking"],keywordSearchMode:"OR"},a.updateSourceValue=a.updateSourceValue.bind(Object(y.a)(a)),a.updateDateValue=a.updateDateValue.bind(Object(y.a)(a)),a.updateKeywordValue=a.updateKeywordValue.bind(Object(y.a)(a)),a.updateKeywordMode=a.updateKeywordMode.bind(Object(y.a)(a)),a.updateKeywordIsSpecified=a.updateKeywordIsSpecified.bind(Object(y.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.queryUpdate()}},{key:"queryUpdate",value:function(){if(this.state.sourceValue.length)if(this.state.dateSpecified&&this.state.dateValue.length){var e=$.where("source","in",this.state.sourceValue).where("date",">=",Number(this.state.dateValue[0])).where("date","<=",Number(this.state.dateValue[1])).orderBy("date","desc");this.submitQueryAndRetrieveNewsList(e)}else{var t=$.where("source","in",this.state.sourceValue).orderBy("date","desc");this.submitQueryAndRetrieveNewsList(t)}else{var a=$.where("article","array-contains","Authority");this.submitQueryAndRetrieveNewsList(a)}}},{key:"filterByKeyword",value:function(e){var t=this;if(this.state.keywordIsSpecified){if(this.state.keywordValue.length){var a=[];return e.forEach((function(e){var n=e.title.toLowerCase()+" "+e.article.toLowerCase(),l=[];t.state.keywordValue.forEach((function(e){var t;e.match(/[\u3400-\u9FBF]/)?-1!=n.search(e)&&l.push(e):(t=n,RegExp("\\b"+e+"\\b").test(t)&&l.push(e))})),"OR"==t.state.keywordSearchMode?l.length&&(e.keywordList=l,a.push(e)):l.length==t.state.keywordValue.length&&(e.keywordList=l,a.push(e))})),a}return console.log("No keyword selected"),[]}return console.log("No keyword filtering"),e}},{key:"submitQueryAndRetrieveNewsList",value:function(e){var t=this;this.setState({newsIsLoading:!0}),e.get().then((function(e){var a=[];e.forEach((function(e){a.push({source:e.data().source,title:e.data().title,date:e.data().dateStr,article:e.data().article,link:e.data().link})})),console.log("Retrieved news list."),a=t.filterByKeyword(a);var n={};t.state.sourceValue.map((function(e,t){n[e]=[]})),a.map((function(e,t){n[e.source].push(e)})),console.log("Processed news list."),t.setState({newsIsLoading:!1,newsList:n})})).catch((function(e){console.log("Error getting documents",e),t.setState({newsIsLoading:!1,newsList:[]})}))}},{key:"updateSourceValue",value:function(e){var t=this;this.setState({sourceValue:e},(function(){t.queryUpdate()}))}},{key:"updateDateValue",value:function(e,t){var a=this;this.setState({dateSpecified:t,dateValue:e},(function(){a.queryUpdate()}))}},{key:"updateKeywordValue",value:function(e){var t=this;this.setState({keywordValue:e},(function(){t.queryUpdate()}))}},{key:"updateKeywordMode",value:function(e){var t=this;this.setState({keywordSearchMode:e},(function(){t.queryUpdate()}))}},{key:"updateKeywordIsSpecified",value:function(e){var t=this;this.setState({keywordIsSpecified:e},(function(){t.queryUpdate()}))}},{key:"render",value:function(){return Object(m.a)(this.props),Object(m.a)(this.state),l.a.createElement("div",{className:"main-div-wrapper"},l.a.createElement(U.c,null,l.a.createElement(U.a,{path:"/admin"},l.a.createElement(H,null)),l.a.createElement(U.a,{path:"/subscribe"},l.a.createElement(G,{sourceValue:this.state.sourceValue,sourceAllOptions:this.state.sourceAllOptions,keywordIsSpecified:this.state.keywordIsSpecified,keywordValue:this.state.keywordValue,keywordAllOptions:this.state.keywordAllOptions,db:P})),l.a.createElement(U.a,{path:"/"},l.a.createElement(R,{updateSourceValue:this.updateSourceValue,updateDateValue:this.updateDateValue,updateKeywordValue:this.updateKeywordValue,updateKeywordMode:this.updateKeywordMode,updateKeywordIsSpecified:this.updateKeywordIsSpecified,sourceValue:this.state.sourceValue,sourceAllOptions:this.state.sourceAllOptions,keywordIsSpecified:this.state.keywordIsSpecified,keywordValue:this.state.keywordValue,keywordAllOptions:this.state.keywordAllOptions,dateValue:this.state.dateValue,dateSpecified:this.state.dateSpecified,newsIsLoading:this.state.newsIsLoading,sourceLink:this.state.sourceLink,keywordSearchMode:this.state.keywordSearchMode,newsList:this.state.newsList}))))}}]),t}(n.Component),ae=a(39),ne=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("script",{src:"/__/firebase/7.11.0/firebase-app.js"}),l.a.createElement("script",{src:"/__/firebase/7.11.0/firebase-analytics.js"}),l.a.createElement("script",{src:"/__/firebase/init.js"}),l.a.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"}),l.a.createElement("div",{className:"outermost-wrapper"},l.a.createElement(ae.a,null,l.a.createElement("div",{className:"top-bar"},l.a.createElement("div",{className:"top-bar-wrapper"},l.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"}),l.a.createElement(ae.b,{className:"home-button",to:{pathname:"/"}},l.a.createElement("p",null,"FinTech Scraping")),l.a.createElement(ae.b,{className:"subscribe-button",to:{pathname:"/subscribe"}},"Subscribe"))),l.a.createElement("div",{className:"main-div"},l.a.createElement(te,null)))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[278,1,2]]]);
//# sourceMappingURL=main.a2795326.chunk.js.map